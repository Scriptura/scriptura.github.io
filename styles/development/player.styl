// @description Audio, vidéo et Caneva

// @note Classe `video` prévue pour les sources vidéos extérieures au site
// @note Classe `map` pour les cartes

audio
video
canvas
  width: 100%

video
.video
  background-color: #000 // @bugfix @affected Google Maps @note Pas de background prédéfinit sur élément `canvas` afin d'éviter les conflits.
  box-shadow: _shadow15

audio
video
  outline: none

//audio
//  height: 3em // @bugfix @affected All browsers @note Nécessaire au positionnement

audio:not([controls])
  display: none // @affected All browsers @note Affichage de l'audio sans contrôle
  height: 0 // @bugfix @affected iOS 5

// @bugfix Redimentionnement de l'élément video à la lecture @note La solution adoptée est de mettre un poster de même dimention que le flux vidéo
//video
//  object-fit cover // @affected Firefox @note Influence sur l'image des posters

.video-youtube
  position: relative // [1] Évite un léger resize entre le thumbnail et le chargement de la vidéo.
  aspect-ratio: 16/9
  user-select: none
  background-color: #000
  & iframe
  & > div
    position: absolute // [1]
    inset: 0
  & .video-youtube-error
    text-align: center
  & .thumbnail-youtube
    display: grid
    place-items: center
    background-size: cover
    background-position: 50% 50% // @note Pour positionner correctement les images plus petites que l'élément.
    & button
      position: relative
      width: 10em
      //aspect-ratio: 1/1
      max-width: 25%
      background: none
      border: none
      outline: none
      & svg
        fill: rgba(255, 255, 255, .7)
      &:focus svg
      &:hover svg
        fill: rgba(255, 255, 255, .9)
  & .video-youtube-title
    position: absolute
    top: 0
    left: 0
    right: 0
    padding: .5em 1em
    overflow: hidden
    white-space: nowrap
    text-align: right
    text-overflow: ellipsis
    text-shadow: 0 0 .2em rgba(0, 0, 0, .8)
  //@media (hover: hover) and (pointer: fine)

// BEGIN test
.audio
  display: none

.audio-player
  display: flex
  justify-content: space-between
  align-items: center
  gap: .5em
  width: 100%
  height: 3em
  background-color: _colorG + 7%
  border-radius: 2em
  box-shadow: box-shadow: _shadow17
  & > *
    align-self: center
  & button
    all: unset
    border: none
    outline: none
    cursor: pointer
  & .audio-play-pause
    flex-shrink: 0
    display: grid
    width: 3em
    height: 3em
    background: _color2
    border-radius: 50%
    &:focus
    &:hover
    &:active
      background-color: _color5
    & svg
      width: 1.2em
      height: 1.2em
      margin: auto
  & .audio-volume
    display: grid
    grid-template-columns: 1.2em
    grid-template-rows: 1.2em 1.2em
    gap: .2em
    margin-right: 1em
    text-align: center
    line-height: 1
    & button
      background-color: _colorG - 7%
      border-radius: 50%
      &:focus
      &:hover
      &:active
        background-color: _color5
  & .progress
    flex-grow: 1
    height: .3em
    background-color: _colorG + 14%

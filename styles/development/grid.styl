// @note Utiliser .grid2 pour avoir deux colonnes, etc., au-delà de .grid4 utiliser .grid-auto (qui par défaut aura 5 colonnes max pour la largeur prévue de notre site).
// @note Avec `minmax` la grille ne sera pas tributaire de son contenu en responsive @see https://css-tricks.com/equal-width-columns-in-css-grid-are-kinda-weird/

:has(> [class^=grid])
.parent-grid // @bugfixed @affected Firefox @note Fallback pour le sélecteur :has(), ajout de la classe via JS.
  container: grid / inline-size
  width: 100% // @note Important si le conteneur n'a pas de largeur définie par défaut.

[class^=grid]
  display: grid
  grid-auto-flow: dense
  grid-template-columns: repeat(var(--n, 1), minmax(0, 1fr))
  &.row-defines // @note Permet aux spans de la propriété grid-row de se caler sur les lignes. Intéressant mais pas souhaitable d'emblée en production, d'où cette classe.
    grid-auto-rows: minmax(0, 1fr)
  &.gap
    gap: var(--gap, _gap)
  &.gap-block
    padding-block: var(--gap, _gap) // @note padding et non margin, car ne doit pas pouvoir fusionner avec les marges de l'élément suivant.
  //&.gap-top
  //  padding-top: var(--gap, _gap) // @note Idem.
  &.gap-bottom
    padding-bottom: var(--gap, _gap) // @note Idem.
  &.gap-vertical
    gap: 0 var(--gap, _gap)

.grid-auto
.grid-auto-min
  grid-template-columns: repeat(auto-fit, minmax(var(--size-grid, 15em), 1fr)) // @note Ne pas définir la variable au-dessus de sa valeur par défaut afin d'éviter des dépassement sur les écrans de petites définitions. Préférer alors les grilles prédéfinies.

.grid-auto-min // @note Valeur réduite évitant de définir trop fréquement la variable de .grid-auto via du style en ligne.
  --size-grid: 10em

.xs-grid-auto
  @media (max-width: _sizeXS)
    grid-template-columns: repeat(auto-fit, minmax(var(--xs-size-grid, 11em), 1fr)) // @todo Valeur arbitraire à redéfinir.

@container grid (35em < width)

  .grid2
  .grid3
  .grid4
    --n: 2

  .c2
  .c3
  .c4
    grid-column: span 2

@container grid (50em < width)

  .grid3
  .grid4
    --n: 3

  .c3
  .c4
    grid-column: span 3

@container grid (70em < width)

  .grid4
    --n: 4

  .c4
    grid-column: span 4
/*
[class^=grid] .grid2 // @note Si éléments de grille imbriqués @todo En test ; espace de nom pour éviter les effets de bord peut-être inutile.
  --n: 2
  @container grid (25em > width)
    & > *
      grid-column: span 2
*/
.r2
  grid-row: span 2

.r3
  grid-row: span 3

.r4
  grid-row: span 4

@container grid (35em < width)

  :root .xs-grid2
    --n: 2

  .xs-c1
    grid-column: span 1

  .xs-c2
    grid-column: span 2

@container grid (35em < width < 50em)

  :root .s-grid1
    --n: 1

  :root .s-grid2
    --n: 2

  .s-c1
    grid-column: span 1

  .s-c2
    grid-column: span 2

@container grid (50em < width < 70em)

  :root .m-grid1
    --n: 1

  :root .m-grid2
    --n: 2

  :root .m-grid3
    --n: 3

  :root .m-grid4
    --n: 4

  .m-c1
    grid-column: span 1

  .m-c2
    grid-column: span 2

@container grid (70em < width < 92em)

  :root .l-grid1
    --n: 1

  :root .l-grid2
    --n: 2

  :root .l-grid3
    --n: 3

  :root .l-grid4
    --n: 4

@container grid (92em < width)

  :root .xl-grid2
    --n: 2

.flex
  display: flex
  flex-wrap: wrap
  align-items: center // @todo En test...
  &.gap
    gap: _gap
  &.gap-bottom
    margin-bottom: _gap
  /* @todo
   * @see https://github.com/w3c/csswg-drafts/issues/3559#issuecomment-557711824
  @supports(gap: 1em)
    & > * + *
      float: left
      margin-left: 1em
  */
  & .item-push
    margin-left: auto

.order
  order: var(--o, -1) // @note Valeur négative car l'utilisation de cette classe est souvent utilisée pour une monté des éléments frères plutôt qu'une descente.

@container grid (35em > width)

  .xs-order
    order: var(--o, -1)

@container grid (35em < width < 50em)

  .s-order
    order: var(--o, -1)

/*
// @note Mémento de nos (presques) équivalences grid/flex codées ultérieurement :

// with Grid layout:

.summary
  display: grid
  gap: _gap

@media (min-width: _sizeXS)

  .summary
    grid-template-columns: repeat(2, 1fr)

@media (min-width: _sizeS)

  .summary
    grid-template-columns: repeat(3, 1fr)

@media (min-width: _sizeL)

  .summary
    grid-template-columns: repeat(4, 1fr)

// with flexbox:

.summary
  display: flex
  flex-wrap: wrap
  gap: _gap

.summary > *
  flex: 1 0 100% // = [flex-grow flex-shrink flex-basis]

@media (min-width: _sizeXS)

  .summary > *
    flex-basis: 'calc(50% - %s)' % _gap

@media (min-width: _sizeS)

  .summary > *
    flex-basis: 'calc(33% - %s)' % _gap

@media (min-width: _sizeL)

  .summary > *
    flex-basis: 'calc(25% - %s)' % _gap
*/

"use strict";const jsDetect=document.documentElement.classList.replace("no-js","js"),printDetect=void(window.print||document.documentElement.classList.add("no-print")),getScript=(e,t="footer")=>new Promise(((a,n)=>{const r=document.createElement("script");r.src=e,r.async=1,r.onerror=n,r.onload=r.onreadystatechange=()=>{const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,a())},"head"==t?document.head.appendChild(r):"footer"==t?document.body.appendChild(r):console.log("Error: the choice of the html tag for the hook is not correct.")})),getScripts=(document.querySelector(".map")&&getScript("/libraries/leaflet/leaflet.js"),document.querySelector("[class*=language-]")&&getScript("/libraries/prism/prism.js"),void(document.querySelector(".client-test")&&getScript("/scripts/clientTest.js"))),getStyle=(e,t="all")=>new Promise(((a,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.href=e,r.media=t;const s=document.querySelector("[rel=stylesheet]");document.head.insertBefore(r,s.nextSibling)})),getStyles=(document.querySelector("pre > code[class*=language]")&&getStyle("/styles/prism.css","screen"),void(document.querySelector("[class*=map]")&&getStyle("/libraries/leaflet/leaflet.css","screen, print"))),supportContainerQueries="container"in document.documentElement.style,supportMediaQueriesRangeContext=window.matchMedia("(width > 0px)").matches,isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;supportContainerQueries&&supportMediaQueriesRangeContext&&!isFirefox||getStyle("/styles/gridFallback.css","screen"),document.querySelectorAll("[class^=grid]").forEach((e=>e.parentElement.classList.add("parent-grid")));const fadeOut=(e,t)=>{e.style.opacity=1((function a(){(e.style.opacity-=30/t)<0?(e.style.opacity=0,e.style.display="none"):requestAnimationFrame(a)}))()},fadeIn=(e,t)=>{e.style.opacity=0,e.style.display="block"((function a(){let n=parseFloat(e.style.opacity);(n+=30/t)>1||(e.style.opacity=n,requestAnimationFrame(a)),n>.99&&(e.style.opacity=1)}))()},injectSvgSprite=(e,t,a)=>{void 0===a&&(a="util");const n=`<svg role="img" focusable="false"><use href="${"/sprites/"+a}.svg#${t}"></use></svg>`;e.insertAdjacentHTML("beforeEnd",n)},externalLinks=void document.querySelectorAll("a").forEach((e=>{e.hostname!==window.location.hostname&&e.setAttribute("target","_blank")})),cmdPrint=(()=>{const e=document.querySelectorAll(".cmd-print"),t=()=>window.print();for(const a of e)a.onclick=t})(),gdpr=(()=>{const e=document.getElementById("gdpr");console.log(e);const t=document.querySelector(".alert"),a=e.content.cloneNode(!0);t.appendChild(a);const n=document.getElementById("gdpr-see"),r=document.getElementById("gdpr-true-consent"),s=document.getElementById("gdpr-false-consent");"yes"===localStorage.getItem("gdprConsent")&&(n.style.display="none"),r.addEventListener("click",(()=>{localStorage.setItem("gdprConsent","yes"),n.style.display="none"}),!1),s.addEventListener("click",(()=>{localStorage.setItem("gdprConsent","no"),n.style.display="grid"}),!1)})(),dateInputToday=void document.querySelectorAll('input[type="date"].today-date').forEach((e=>e.valueAsDate=new Date)),multipleSelectCustom=void document.querySelectorAll(".input select[multiple]").forEach((e=>{const t=e.length;t<7?(e.size=t,e.style.overflow="hidden"):e.size=7})),colorInput=void document.querySelectorAll(".color-output input").forEach((e=>{const t=document.createElement("output");e.after(t),e.parentElement.querySelector("output"),t.textContent=e.value,e.oninput=function(){this.value=this.value,t.textContent=this.value}})),scrollToTop=(()=>{const e=document.querySelector(".footer"),t=document.createElement("button");t.type="button",t.classList.add("scroll-top"),t.setAttribute("aria-label","Scroll to top"),injectSvgSprite(t,"arrow-up"),e.appendChild(t);const a=document.querySelector(".scroll-top");a.classList.add("hide");window.addEventListener("scroll",(()=>{const e=window.innerHeight/2;window.scrollY>e?a.classList.remove("hide"):a.classList.add("hide")}));a.addEventListener("click",(()=>{window.scrollTo({top:0})}),!1)})(),mainMenu=(()=>{const e=document.querySelector(".cmd-nav"),t=document.querySelector(".sub-nav"),a=document.querySelectorAll("body > :not(.nav");e.addEventListener("click",(()=>{document.documentElement.classList.toggle("active"),document.body.classList.toggle("active"),e.classList.toggle("active"),t.classList.toggle("active"),a.forEach((e=>e.hasAttribute("inert")?e.removeAttribute("inert"):e.setAttribute("inert","")))}))})(),addDropCap=void document.querySelectorAll(".add-drop-cap > p:first-child").forEach((e=>e.innerHTML=e.innerHTML.replace(/^(\w)/,'<span class="drop-cap">$1</span>'))),progressBar=void document.querySelectorAll(".progress-bar").forEach((e=>{e.insertAdjacentHTML("afterbegin","<div></div>"),e.querySelector("div").style.width=e.dataset.value+"%"})),progressBarTest=(()=>{const e=document.querySelector("#progress-test-cmd"),t=document.querySelector("#progress-test-target");e&&e.addEventListener("click",(()=>{let e=t.dataset.value;setInterval((function(){e<100&&(e++,t.querySelector("div").style.width=e+"%")}),20)}),!1)})();function buttonEffect(e){const t=e.dataset.frame;"vibrate"in navigator&&navigator.vibrate(t||200)}document.querySelectorAll("button[class*=button]").forEach((e=>e&&e.addEventListener("click",(()=>buttonEffect(e)),!1)));class VGrid{constructor(e){this.grid=e instanceof HTMLElement?e:document.querySelector(e),this.gridItems=[].slice.call(this.grid.children)}resizeGridItem(e){const t=parseInt(window.getComputedStyle(this.grid).getPropertyValue("grid-row-gap")),a=Math.ceil((e.clientHeight+t)/(1+t));e.style.gridRowEnd="span "+a}resizeAllGridItems(){this.grid.style.alignItems="start",this.gridItems.forEach((e=>this.resizeGridItem(e))),this.grid.style.alignItems="stretch"}}for(const e of document.querySelectorAll(".masonry")){const t=new VGrid(e);window.addEventListener("load",(()=>{t.resizeAllGridItems()})),window.addEventListener("resize",(()=>{let e;clearTimeout(e),e=setTimeout((()=>{t.resizeAllGridItems()}),200)}))}const formValidation=(()=>{const e="message-warning";function t(t,a,n){t.classList.add("invalid"),a&&a.remove(),(a=document.createElement("div")).classList.add(e),t.after(a);const r=document.createElement("p");r.textContent=n;r.insertAdjacentHTML("afterbegin",'<svg class="icon-inline" role="img" focusable="false"><use href="/sprites/util.svg#warning"></use></svg>'),a.appendChild(r)}function a(e,t){e.classList.remove("invalid"),t&&t.remove()}(()=>{function n(n){const r=n.parentNode.querySelector("."+e);if(n.value.length>41){t(n,r,"Entrée invalide : chaîne de caractères trop longue.")}else if(n.value.match("\\d")){t(n,r,"Entrée invalide : présence de caractères numériques.")}else if(n.value.match('[\\\\/\\[\\]|%&!?+÷×=±_{}()<>;:,$€£¥¢*§@~`•√π¶∆^°²©®™✓#"]')){t(n,r,"Entrée invalide : présence de caractères spéciaux non autorisés.")}else a(n,r)}document.querySelectorAll(".validation-name").forEach((e=>{e.addEventListener("keyup",(t=>n(e)),!1),e.addEventListener("change",(t=>e.value=e.value.replace(/  +/g," ")),!1),e.addEventListener("change",(t=>e.value=e.value.trim()),!1),e.addEventListener("change",(t=>e.value=e.value.replace(/^\p{CWU}/u,(e=>e.toLocaleUpperCase()))),!1),e.addEventListener("change",(t=>n(e)),!1)}))})(),document.querySelectorAll(".validation-email").forEach((n=>{n.addEventListener("keyup",(r=>function(n){const r=n.parentNode.querySelector("."+e);n.value.match(/@.*@/)?t(n,r,"Entrée invalide : présence de plusieurs arobases."):a(n,r)}(n)),!1),n.addEventListener("change",(e=>n.value=n.value.replace(/ +/g,"")),!1),n.addEventListener("change",(e=>n.value=n.value.trim()),!1),n.addEventListener("change",(r=>function(n){const r=n.parentNode.querySelector("."+e);n.value?n.value.match(/@/)?n.value.match(/\S+@\S+\.\S+/)?a(n,r):t(n,r,"Entrée invalide : l'addresse mail n'est pas conforme."):t(n,r,"Entrée invalide : absence du caractère arobase obligatoire."):a(n,r)}(n)),!1)})),document.querySelectorAll(".validation-url").forEach((n=>{n.addEventListener("keyup",(r=>function(n){const r=n.parentNode.querySelector("."+e);n.value.match(/@.*@/)?t(n,r,"Entrée invalide : présence de plusieurs arobases."):a(n,r)}(n)),!1),n.addEventListener("change",(e=>n.value=n.value.replace(/ +/g,"")),!1),n.addEventListener("change",(e=>n.value=n.value.trim()),!1),n.addEventListener("change",(e=>n.value=n.value.replace(/^\p{CWL}/u,(e=>e.toLocaleLowerCase()))),!1),n.addEventListener("change",(r=>function(n){const r=n.parentNode.querySelector("."+e);let s;try{new URL(n.value),s=!0}catch(e){s=!1}n.value?n.value.match(/http/)?s?a(n,r):t(n,r,"Entrée invalide : l'url n'est pas conforme."):t(n,r,"Entrée invalide : il manque un protocole à votre url (https://, http://, ftp://, ...)."):a(n,r)}(n)),!1)})),document.querySelectorAll(".validation-phone-fr_FR").forEach((n=>{n.addEventListener("keyup",(r=>function(n){const r=n.parentNode.querySelector("."+e);n.value&&n.value.match(/(?!\+)\D/)?t(n,r,"Entrée invalide : présence de caractères non autorisés."):a(n,r)}(n)),!1),n.addEventListener("change",(e=>n.value=n.value.replace(/ +/g,"")),!1),n.addEventListener("change",(e=>n.value=n.value.trim()),!1),n.addEventListener("change",(r=>function(n){const r=n.parentNode.querySelector("."+e);n.value?n.value.match(/^((0|0033|\+33)[1-9][0-9]{8})$/)?a(n,r):t(n,r,"Entrée invalide : format incorrect pour la France."):a(n,r)}(n)),!1)}))})(),imageFocus=(()=>{const e=document.querySelectorAll("[class*=-focus]"),t="focus-off",a=(e.forEach((e=>{const t=document.createElement("button");injectSvgSprite(t,"enlarge"),e.appendChild(t),t.ariaLabel="enlarge",t.classList.add("icon-enlarge")})),e.forEach((e=>{e.addEventListener("click",(()=>{a(e),document.documentElement.style.overflow="hidden"}))})),e=>{let t=e.querySelector("img").cloneNode(!0);t.removeAttribute("width"),t.removeAttribute("height"),document.body.appendChild(t),t=n(t),t=r(e)}),n=e=>{const a=document.createElement("div");a.classList.add(t),e.after(a,e),a.appendChild(e),s()},r=e=>{const a=document.querySelector("."+t);a.addEventListener("click",(()=>{a.parentElement.removeChild(a),document.documentElement.removeAttribute("style"),e.querySelector("button").focus()}))},s=()=>{const e=document.querySelector("."+t),a=document.createElement("button");e.appendChild(a),injectSvgSprite(a,"shrink"),a.classList.add("icon-shrink"),a.ariaLabel="shrink",a.focus()}})(),accordion=(()=>{document.querySelectorAll(".accordion").forEach((e=>e.setAttribute("role","tablist")));document.querySelectorAll(".accordion > details").forEach((e=>{const t=e.innerHTML,a=document.createElement("div");a.classList.add("accordion-details"),e.open&&a.classList.add("open"),e.after(a,e),a.appendChild(e).insertAdjacentHTML("afterend",t),e.parentElement.removeChild(e)})),(()=>{let e=0;document.querySelectorAll(".accordion > * > summary").forEach((t=>{e++;const a=t.innerHTML,n=document.createElement("button");n.id="accordion-summary-"+e,n.type="button",n.classList.add("accordion-summary"),n.setAttribute("role","tab"),n.setAttribute("aria-controls","accordion-panel-"+e),t.after(n,t),n.appendChild(t).insertAdjacentHTML("afterend",a),t.parentElement.removeChild(t)}))})(),(()=>{let e=0;document.querySelectorAll(".accordion > * > :last-child").forEach((t=>{e++,t.id="accordion-panel-"+e,t.classList.add("accordion-panel"),t.setAttribute("role","tabpanel"),t.setAttribute("aria-labelledby","accordion-summary-"+e)}))})(),document.querySelectorAll(".accordion-details").forEach((e=>{const t=e.children[0],a=e.children[1];e.classList.contains("open")?(t.setAttribute("aria-expanded","true"),a.style.maxHeight=a.scrollHeight+"px",a.setAttribute("aria-hidden","false")):(t.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"))})),document.querySelectorAll(".accordion-summary").forEach((t=>{t.addEventListener("click",(()=>{const a=t.parentElement.parentElement.dataset.singletab;t.parentElement.classList.toggle("open"),t.parentElement.classList.contains("open")?t.setAttribute("aria-expanded","true"):t.setAttribute("aria-expanded","false"),a&&e(t.parentElement);const n=t.nextElementSibling;"false"===n.getAttribute("aria-hidden")?(n.style.maxHeight=null,n.setAttribute("aria-hidden","true")):(n.style.maxHeight=n.scrollHeight+"px",n.setAttribute("aria-hidden","false"))}))}));const e=e=>{for(const t of e.parentElement.children)t!==e&&(t.classList.remove("open"),t.firstElementChild.setAttribute("aria-expanded","false"),t.lastElementChild.setAttribute("aria-hidden","true"),t.lastElementChild.style.maxHeight=null)}})(),tabs=((()=>{for(const e of document.querySelectorAll(".tabs")){const t=document.createElement("div");t.classList.add("tab-list"),t.setAttribute("role","tablist"),t.setAttribute("aria-label","Entertainment"),e.prepend(t)}})(),(()=>{let e=0;for(const t of document.querySelectorAll(".tabs > * > summary")){e++;const a=t.parentElement.parentElement.firstElementChild,n=t.innerHTML,r=document.createElement("button");r.id="tab-summary-"+e,r.type="button",r.classList.add("tab-summary"),r.setAttribute("role","tab"),r.setAttribute("aria-controls","tab-panel-"+e),a.appendChild(r),r.insertAdjacentHTML("beforeend",n),t.parentElement.removeChild(t)}})(),(()=>{let e=0;for(const t of document.querySelectorAll(".tabs > details > *"))e++,t.id="tab-panel-"+e,t.classList.add("tab-panel"),t.setAttribute("role","tabpanel"),t.setAttribute("aria-labelledby","tabsummary-"+e),t.parentElement.parentElement.appendChild(t),t.parentElement.querySelector("details").remove()})(),(()=>{for(const e of document.querySelectorAll(".tab-summary:first-child"))e.disabled=!0,e.classList.add("current"),e.setAttribute("aria-selected","true");for(const e of document.querySelectorAll(".tab-summary"))e.addEventListener("click",(()=>{for(const t of e.parentElement.children)t.disabled=!1,t.classList.remove("current"),t.setAttribute("aria-selected","false");e.disabled=!0,e.classList.add("current"),e.setAttribute("aria-selected","true")}))})(),void(()=>{for(const e of document.querySelectorAll(".tab-summary"))e.addEventListener("click",(()=>{const t=document.getElementById(e.getAttribute("aria-controls"));t.style.display="block";for(const a of e.parentElement.parentElement.querySelectorAll(".tab-panel"))a!==t&&(a.parentElement===e.parentElement.parentElement&&(a.style.display="none"),e===e.classList.contains("current")&&e.classList.remove("current"))}))})()),selectText=e=>{const t=document.body;if(t.createTextRange){const a=t.createTextRange();a.moveToElementText(e),a.select()}else if(window.getSelection){const t=window.getSelection(),a=document.createRange();a.selectNodeContents(e),t.removeAllRanges(),t.addRange(a)}else console.warn("Could not select text in node: Unsupported browser.")},selectAndCopy=void document.querySelectorAll(".pre > code:not(:empty)").forEach((e=>{const t=document.createElement("button"),a=e.dataset.select||"Select and copy";t.type="button",e.offsetHeight<30&&t.classList.add("copy-offset"),e.parentElement.appendChild(t),t.title=a,t.ariaLabel=a,injectSvgSprite(t,"copy"),t.addEventListener("click",(()=>{selectText(e),document.execCommand("copy")}))})),addTitleCodeBlock=void document.querySelectorAll(".pre").forEach((e=>{const t=document.createElement("div"),a=document.createElement("span"),n=e.children[0].dataset.code,r=document.createTextNode(n);e.appendChild(t),injectSvgSprite(t,"code"),n&&(a.appendChild(r),t.appendChild(a))})),readablePassword=(()=>{const e=document.querySelectorAll(".input [type=password]");for(const t of e){t.parentElement.classList.add("input","input-password");const e=document.createElement("button");e.type="button",e.title="See password",t.after(e),injectSvgSprite(e,"eye"),e.addEventListener("click",(()=>{e.removeChild(e.querySelector("svg")),"password"===t.type?(t.type="text",e.title="Hide password",injectSvgSprite(e,"eye-blocked")):(t.type="password",e.title="See password",injectSvgSprite(e,"eye"))}))}})(),rangeInput=void document.querySelectorAll(".range").forEach((e=>{const t=e.querySelector("input"),a=e.querySelector("output");function n(t){e.dataset.currency?t=new Intl.NumberFormat(e.dataset.intl,{style:"currency",currency:e.dataset.currency}).format(t):e.dataset.intl&&(stop=new Intl.NumberFormat(e.dataset.intl).format(t)),a.textContent=t}n(t.value),t.oninput=function(){n(this.value)}})),rangeMultithumb=void document.querySelectorAll(".range-multithumb").forEach((e=>{const[t,a]=e.querySelectorAll("input"),n=e.querySelector("output"),r=Number(t.getAttribute("step"));let s=Number(t.value),o=Number(a.value),l=(Number(a.max),Number(a.min),100/Number(a.max)*s),i=100/Number(a.max)*o;function c(t,a){e.dataset.currency?t=new Intl.NumberFormat(e.dataset.intl,{style:"currency",currency:e.dataset.currency}).format(t):e.dataset.intl&&(a=new Intl.NumberFormat(e.dataset.intl).format(a)),e.dataset.currency?a=new Intl.NumberFormat(e.dataset.intl,{style:"currency",currency:e.dataset.currency}).format(a):e.dataset.intl&&(t=new Intl.NumberFormat(e.dataset.intl).format(t)),n.textContent=`${t} - ${a}`}function d(){o=Number(a.value),c(this.value,o),a.value=o>Number(this.value)?o:Number(this.value)+r,e.style.setProperty("--start",100/Number(a.max)*this.value+"%"),e.style.setProperty("--stop",100/Number(a.max)*a.value+"%")}function u(){s=Number(t.value),c(s,this.value),t.value=s<Number(this.value)?s:Number(this.value)-r,e.style.setProperty("--start",100/Number(a.max)*t.value+"%"),e.style.setProperty("--stop",100/Number(a.max)*this.value+"%")}e.style.setProperty("--start",`${l}%`),e.style.setProperty("--stop",`${i}%`),n.textContent=`${s}-${o}`,c(s,o),t.oninput=d,t.onchange=d,a.oninput=u,a.onchange=u})),lineMarks=e=>{const t=document.querySelectorAll(".add-line-marks > :is(p, h2, h3, h4, h5, h6, blockquote, ul, ol, [class*=grid])"),a=e=>{const t=document.createElement("a");t.id="mark"+n,t.setAttribute("href","#mark"+n);const a=document.createTextNode(n);t.appendChild(a),t.classList.add("line-mark"),e.appendChild(t)};let n=0;for(const e of t)n++,a(e)};function strToDom(e){return document.createRange().createContextualFragment(e).firstChild}function easeOutExpo(e){return 1===e?1:1-Math.pow(2,-10*e)}lineMarks();class Point{constructor(e,t){this.x=e,this.y=t}toSvgPath(){return`${this.x} ${this.y}`}static fromAngle(e){return new Point(Math.cos(e),Math.sin(e))}}class PieChart extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"}),t=this.getAttribute("labels")?.split(";")??[],a=this.getAttribute("donut")??"0.7",n=this.getAttribute("colors")?.split(";")??["hsl(9, 100%, 64%)","hsl(29, 100%, 64%)","hsl(49, 100%, 64%)","hsl(69, 100%, 64%)","hsl(89, 100%, 64%)","hsl(109, 100%, 64%)","hsl(129, 100%, 64%)","hsl(149, 100%, 64%)","hsl(169, 100%, 64%)","hsl(189, 100%, 64%)"];this.data=this.getAttribute("data").split(";").map((e=>parseFloat(e)));const r=this.getAttribute("gap")??"0.04",s=strToDom(`<svg viewBox="-1 -1 2 2">\n          <g mask="url(#graphMask)"></g>\n          <mask id="graphMask">\n              <rect fill="white" x="-1" y="-1" width="2" height="2"/>\n              <circle r="${a}" fill="black"/>\n          </mask>\n      </svg>`),o=s.querySelector("g"),l=s.querySelector("mask");this.paths=this.data.map(((e,t)=>{const a=n[t%n.length].trim(),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("fill",a),o.appendChild(r),r.addEventListener("mouseover",(()=>this.handlePathHover(t))),r.addEventListener("mouseout",(()=>this.handlePathOut(t))),r})),this.lines=this.data.map((()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.setAttribute("stroke","#000"),e.setAttribute("stroke-width",r),e.setAttribute("x1","0"),e.setAttribute("y1","0"),l.appendChild(e),e})),this.labels=t.map(((t,a)=>{const n=document.createElement("div");return n.id="label"+a,n.innerText=t,n.setAttribute("tabindex","0"),e.appendChild(n),n}));const i=document.createElement("style");i.innerHTML="\n:host {\n  display: block;\n  position: relative;\n}\nsvg {\n  width: 100%;\n  height: 100%;\n}\npath {\n  cursor: pointer;\n  transition: filter .3s;\n}\npath:hover,\npath.active {\n  filter: invert(1);\n}\ndiv {\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: .2em .5em;\n  white-space: nowrap;\n  transform: translate(-50%, -50%);\n  background-color: var(--pie-chart-color-label, #222);\n  opacity: 0;\n  transition: opacity .3s;\n  pointer-events: none;\n}\ndiv:focus,\ndiv:active,\ndiv.active {\n  opacity: 1;\n  outline: none;\n}\n",e.appendChild(i),e.appendChild(s)}connectedCallback(){const e=Date.now(),t=()=>{const a=(Date.now()-e)/1e3;this.draw(1),a<1?(this.draw(easeOutExpo(a)),window.requestAnimationFrame(t)):this.draw(1)};window.requestAnimationFrame(t)}draw(e=1){const t=this.data.reduce(((e,t)=>e+t),0);let a=Math.PI/-2,n=new Point(0,-1);for(let r=0;r<this.data.length;r++){this.lines[r].setAttribute("x2",n.x),this.lines[r].setAttribute("y2",n.y);const s=this.data[r]/t*e;1===e&&this.positionLabel(this.labels[r],a+s*Math.PI),a+=2*s*Math.PI-1e-7;const o=Point.fromAngle(a),l=s>.5?"1":"0";this.paths[r].setAttribute("d",`M 0 0 L ${n.toSvgPath()} A 1 1 0 ${l} 1 ${o.toSvgPath()} L 0 0`),n=o}}handlePathHover(e){this.dispatchEvent(new CustomEvent("sectionhover",{detail:e})),this.labels[e]?.classList.add("active")}handlePathOut(e){this.labels[e]?.classList.remove("active")}positionLabel(e,t){if(!e||!t)return;const a=Point.fromAngle(t);e.style.setProperty("top",100*(.5*a.y+.5)+"%"),e.style.setProperty("left",100*(.5*a.x+.5)+"%")}}customElements.define("pie-chart",PieChart);const mediaPlayer=()=>{const e=".media",t=document.querySelectorAll(e),a=e=>{e.insertAdjacentHTML("afterend",'\n  <div class="media-player">\n    <button class="media-play-pause" aria-label="play/pause">\n      <svg focusable="false">\n        <use href="/sprites/player.svg#play"></use>\n      </svg>\n      <svg focusable="false">\n        <use href="/sprites/player.svg#play-disabled"></use>\n      </svg>\n      <svg focusable="false">\n        <use href="/sprites/player.svg#pause"></use>\n      </svg>\n    </button>\n    <div class="media-tags">\n      <output class="media-subtitle-langage"></output>\n      <output class="media-playback-rate"></output>\n    </div>\n    <div class="media-time">\n      <output class="media-current-time"aria-label="current time">0:00</output>&nbsp;/&nbsp;<output class="media-duration"aria-label="duration">0:00</output>\n    </div>\n    <input type="range" class="media-progress-bar" aria-label="progress bar" min="0" max="100" step="1" value="0">\n    <div class="media-extend-volume">\n      <input type="range" class="media-volume-bar" aria-label="volume bar" min="0" max="1" step=".1" value=".5">\n      <button class="media-mute" aria-label="mute">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#volume-up"></use>\n        </svg>\n        <svg focusable="false">\n          <use href="/sprites/player.svg#volume-off"></use>\n        </svg>\n      </button>\n    </div>\n    <button class="media-fullscreen" aria-label="fullscreen">\n      <svg focusable="false">\n        <use href="/sprites/player.svg#fullscreen"></use>\n      </svg>\n    </button>\n    <button class="media-menu" aria-label="menu">\n      <svg focusable="false">\n        <use href="/sprites/player.svg#menu"></use>\n      </svg>\n    </button>\n    <div class="media-extend-menu">\n      <button class="media-next-reading" aria-label="next reading mode">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#move-down"></use>\n        </svg>\n      </button>\n      <button class="media-subtitles" aria-label="subtitles">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#subtitles"></use>\n        </svg>\n        \x3c!--\n        <svg focusable="false">\n          <use href="/sprites/player.svg#subtitles-off"></use>\n        </svg>\n        --\x3e\n      </button>\n      <button class="media-picture-in-picture" aria-label="picture in picture">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#picture-in-picture"></use>\n        </svg>\n        <svg focusable="false">\n          <use href="/sprites/player.svg#picture-in-picture-alt"></use>\n        </svg>\n      </button>\n      <button class="media-slow-motion" aria-label="slow motion">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#slow-motion"></use>\n        </svg>\n      </button>\n      <button class="media-leap-rewind" aria-label="leap rewind">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#rewind-10"></use>\n        </svg>\n      </button>\n      <button class="media-leap-forward" aria-label="leap forward">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#forward-10"></use>\n        </svg>\n      </button>\n      \x3c!--\n      <button class="media-fast-rewind" aria-label="fast rewind">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#fast-rewind"></use>\n        </svg>\n      </button>\n      <button class="media-fast-forward" aria-label="fast forward">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#fast-forward"></use>\n        </svg>\n      </button>\n      --\x3e\n      <button class="media-stop" aria-label="stop">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#stop"></use>\n        </svg>\n      </button>\n      <button class="media-replay" aria-label="replay">\n        <svg focusable="false">\n          <use href="/sprites/player.svg#replay"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n  '),r(e)},n=e=>{let t=Math.floor(e/3600).toString(),a=Math.floor(e%3600/60).toString(),n=Math.floor(e%60).toString().padStart(2,"0");return"0"===t&&(t=null),isNaN(t)&&(t=null),isNaN(a)&&(a="0"),isNaN(n)&&(n="00"),[t,a,n].filter(Boolean).join(":")},r=e=>{const t=e.nextElementSibling,a=t.querySelector(".media-time"),r=t.querySelector(".media-duration"),s=t.querySelector(".media-progress-bar"),o=t.querySelector(".media-menu"),l=t.querySelector(".media-extend-menu");e.readyState>=1?r.value=n(e.duration):e.addEventListener("loadedmetadata",(()=>r.value=n(e.duration))),["loadeddata","loadedmetadata","click","play"].forEach((t=>{e.addEventListener(t,(()=>{e.duration===1/0&&(a.innerHTML="Lecture en continu",a.style.marginRight="auto",s.remove(),o.remove(),l.remove())}))}))},s=(e,t,a)=>{setInterval((function(){const r=Math.floor(e.currentTime/e.duration*1e3)/10;t.value=n(e.currentTime),a.value=r,a.style.setProperty("--position",`${r}%`)}),50)},o=(e,t)=>e?t.classList.add("active"):t.classList.remove("active"),l=e=>e.paused?e.play():e.pause(),i=e=>`cc: ${e}`,c=(e,t=!1)=>{const a=e.querySelector(".media-extend-menu");t&&a.classList.toggle("active"),document.querySelectorAll(".media-player").forEach((t=>{if(t!==e){const e=t.querySelector(".media-menu"),a=t.querySelector(".media-extend-menu");e&&e.classList.remove("active"),a&&a.classList.remove("active")}}))},d=(t,a)=>{if(a){const n=a.querySelectorAll(e)||"";return n[[...n].indexOf(t)+1]||n[0]||""}},u=(t,a)=>{if(a){const n=a.querySelectorAll(e)||"";return n[[...n].indexOf(t)+2]||n[0]||""}},m=(e,t,a,n)=>{if((e=t).error)return console.log(e.error.message),m(e,d(e,n),u(e,n),n);const r=e.nextElementSibling,i=r.querySelector(".media-current-time"),c=r.querySelector(".media-play-pause"),p=r.querySelector(".media-stop"),v=r.querySelector(".media-progress-bar");l(e),s(e,i,v),o(!e.paused,c),o(e.paused&&0===e.currentTime,p),e.paused&&0===e.currentTime?p.disabled=!0:p.disabled=!1},p=a=>{const n=a.nextElementSibling,r=a.textTracks,p=n.querySelector(".media-play-pause"),v=n.querySelector(".media-playback-rate"),y=n.querySelector(".media-subtitle-langage"),h=n.querySelector(".media-current-time"),g=n.querySelector(".media-progress-bar"),b=n.querySelector(".media-volume-bar"),f=n.querySelector(".media-mute"),E=n.querySelector(".media-fullscreen"),S=n.querySelector(".media-menu"),L=n.querySelector(".media-next-reading"),w=n.querySelector(".media-picture-in-picture"),q=n.querySelector(".media-slow-motion"),A=n.querySelector(".media-leap-rewind"),x=n.querySelector(".media-leap-forward"),k=n.querySelector(".media-stop"),C=n.querySelector(".media-replay"),T=n.querySelector(".media-subtitles"),P=a.closest(".media-relationship"),N=d(a,P),I=u(a,P);"AUDIO"!==a.tagName&&document.fullscreenEnabled||E.remove(),"AUDIO"!==a.tagName&&document.pictureInPictureEnabled||w.remove(),a.textTracks[0]||T.remove(),P||L.remove();g.value="0",g.style.setProperty("--position","0%"),g.style.setProperty("--position-buffer","0%"),b.value=".5",b.style.setProperty("--position","50%");P&&a.addEventListener("canplay",(()=>o("true"===P.dataset.nextReading,a.nextElementSibling.querySelector(".media-next-reading")))),["loadeddata","progress"].forEach((e=>{a.addEventListener(e,(()=>{a.onprogress=()=>g.style.setProperty("--position-buffer",`${Math.floor(a.buffered.end(a.buffered.length-1)/a.duration*100)}%`)}))})),a.addEventListener("waiting",(()=>n.classList.add("waiting"))),a.addEventListener("canplay",(()=>n.classList.remove("waiting"))),document.addEventListener("play",(e=>{t.forEach((t=>t!==e.target&&t.pause()))}),!0),["click","play","pause","ended","input"].forEach((e=>{document.addEventListener(e,(()=>{o(!a.paused,p),o(a.muted||0===a.volume,f),o(a.paused&&0===a.currentTime,k),o(a.loop,C),a.paused&&0===a.currentTime?k.disabled=!0:k.disabled=!1}))})),a.addEventListener("ended",(()=>{a.currentTime=0,o(!a.paused,p),o(a.paused&&0===a.currentTime,k),P&&"true"===P.dataset.nextReading&&a.play&&m(a,N,I,P),P&&P.dataset.nextReading&&N&&(I.preload="auto")})),a.addEventListener("pause",(()=>o(!a.paused,p))),p.addEventListener("click",(()=>{l(a),s(a,h,g),c(n,!1),P&&P.dataset.nextReading&&N&&(N.preload="auto")})),f.addEventListener("click",(()=>(e=>e.muted=!e.muted)(a))),g.addEventListener("input",(()=>{a.currentTime=g.value/g.max*a.duration,s(a,h,g)})),b.addEventListener("input",(()=>{const e=b.value/b.max;a.volume=e,b.style.setProperty("--position",100*e+"%")})),S.addEventListener("click",(()=>{c(n,!0),S.classList.toggle("active");try{document.querySelector("body:has(*)")}catch(e){console.log('Solution de repli JS pour ".media-extend-menu"');const t=n.querySelector(".media-extend-menu"),a=t.querySelectorAll("button").length;let r=a;a>12?r=6:a>6&&(r=Math.ceil(a/2)),t.style.setProperty("--mem",r),console.log(r)}})),L.addEventListener("click",(()=>{"false"===P.dataset.nextReading?P.dataset.nextReading="true":P.dataset.nextReading="false",P.querySelectorAll(e).forEach((e=>{"true"===P.dataset.nextReading&&(e.loop=!1),o("true"===P.dataset.nextReading,e.nextElementSibling.querySelector(".media-next-reading"))}))}));let M=-1;T.addEventListener("click",(()=>{M+=1,M>1&&(r[M-1].mode="disabled"),M<r.length?("showing"===r[M].mode&&(M+=1),((e,t,a)=>{e[t-1]&&(e[t-1].mode="disabled"),e[t].mode="showing";const n=i(e[t].language);a.value=n})(r,M,y),o("showing"===r[M].mode,T),o("showing"===r[M].mode,y)):(M=-1,y.value="",T.classList.remove("active"),y.classList.remove("active"))}));for(let e of r)if("showing"===e.mode){T.classList.add("active"),y.classList.add("active"),y.value=i(e.language);break}"VIDEO"===a.tagName&&document.fullscreenEnabled&&E.addEventListener("click",(()=>(e=>e.requestFullscreen())(a))),document.addEventListener("fullscreenchange",(()=>E.classList.toggle("active"))),w.addEventListener("click",(()=>{(e=>{document.pictureInPictureElement?document.exitPictureInPicture():document.pictureInPictureEnabled&&e.requestPictureInPicture()})(a),o(!document.pictureInPictureElement,w)})),q.addEventListener("click",(()=>{((e,t)=>{switch(e.playbackRate){case 1:e.playbackRate=.5;break;case.5:e.playbackRate=.25;break;case.25:e.playbackRate=.1;break;case.1:e.playbackRate=4;break;case 4:e.playbackRate=2;break;case 2:e.playbackRate=1.5;break;default:e.playbackRate=1}t.innerHTML=`x${e.playbackRate}`})(a,v),o(1!==a.playbackRate,q),1!==a.playbackRate&&v.classList.add("active")})),A.addEventListener("click",(()=>{(e=>{e.currentTime-=10})(a),s(a,h,g)})),x.addEventListener("click",(()=>{(e=>{e.currentTime+=10})(a),s(a,h,g)})),k.addEventListener("click",(()=>{(e=>{e.pause(),e.currentTime=0})(a),s(a,h,g)})),C.addEventListener("click",(()=>(e=>e.loop=!e.loop)(a)))},v=e=>{const t=e.nextElementSibling,a=t.querySelector(".media-time");e.src=e.currentSrc,e.addEventListener("error",(()=>{t.setAttribute("inert",""),t.querySelectorAll("button, input").forEach((e=>e.disabled=!0)),e.classList.add("error"),t.classList.add("error"),console.error(e.error.message),a.innerHTML="Erreur de lecture",e.poster=""}),!0)};let y=0;for(const e of t)y++,e.id="media-"+y,e.removeAttribute("controls"),a(e),p(e),v(e)};window.addEventListener("DOMContentLoaded",mediaPlayer());const mapsIdAdd=(()=>{let e=1;document.querySelectorAll(".map").forEach((function(t){t.id="map"+e,e++}))})(),startPage=(()=>{const e=document.documentElement,t="start-map";e.classList.add(t),window.addEventListener("load",(function(){setTimeout((()=>{e.classList.remove(t)}),1500)}))})(),maps=void document.querySelectorAll(".map").forEach((function(e){window.addEventListener("load",(()=>(()=>{const t=L.map(e.id),a=document.getElementById(e.id),n=JSON.parse(a.dataset.places),r=[];L.tileLayer(a.dataset.tileserver||"https://tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:a.dataset.minzoom||2,maxZoom:a.dataset.maxzoom||18,zoom:a.dataset.zoom||a.dataset.maxzoom,attribution:a.dataset.attribution||""}).addTo(t);const s=L.divIcon({className:"leaflet-data-marker",html:'<svg class="marker-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 14C146 14 57 102 57 211c0 172 199 295 199 295s199-120 199-295c0-109-89-197-199-197zm0 281a94 94 0 1 1 0-187 94 94 0 0 1 0 187z"/><path d="M256 14v94a94 94 0 0 1 0 187v211s199-120 199-295c0-109-89-197-199-197z"/></svg>',iconAnchor:[20,40],iconSize:[40,40],popupAnchor:[0,-60]});for(let e=0;e<n.length;e++){const a=L.marker(n[e][1],{icon:s});n[e][0]&&a.bindPopup(n[e][0]),a.addTo(t),r.push(a)}const o=new L.featureGroup(r);t.fitBounds(o.getBounds()),a.dataset.zoom&&t.setZoom(a.dataset.zoom)})()))})),youtubeVideo=void document.querySelectorAll(".video-youtube").forEach((e=>{const t=e.dataset.id;fetch(`https://youtube.com/oembed?url=http://youtube.com/watch?v=${t}`).then((e=>e.json())).then((a=>{const n=document.createElement("div");n.classList.add("thumbnail-youtube"),n.style.backgroundImage=`url(${a.thumbnail_url})`,n.innerHTML=`<button><svg role="img" focusable="false"><use href="/sprites/util.svg#youtube"></use></svg></button><div class="video-youtube-title">${a.title}</div>`,e.appendChild(n),n.querySelector("button").addEventListener("click",(()=>{n.remove();const r=document.createElement("iframe");r.src=`https://www.youtube.com/embed/${t}?feature=oembed&autoplay=1`,r.title=a.title,r.setAttribute("allowFullScreen",""),e.appendChild(r)}))})).catch((t=>{const a=document.createElement("div");a.classList.add("thumbnail-youtube"),a.innerHTML='<div class="video-youtube-error">Erreur : cette vidéo n\'existe pas !<br>(ou a été supprimée...)<br><svg class="icon scale250" role="img" focusable="false"><use href="/sprites/util.svg#space-invader"></use></svg></div>',e.appendChild(a),console.error("Une requête pour une vidéo YouTube a échoué.")}))}));
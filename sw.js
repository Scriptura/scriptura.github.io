const CACHE_NAME="v32.7",resourcesToCache=["/","/styles/main.css","/styles/print.css","/scripts/main.js","/scripts/more.js","/fonts/notoSans-Regular.woff2","/fonts/notoSerif-Regular.woff2","/sprites/util.svg","/sprites/player.svg","/medias/images/logo/logo.svg"];async function addResourcesToCache(e){const t=await caches.open(CACHE_NAME);await t.addAll(e)}async function putInCache(e,t){const s=await caches.open(CACHE_NAME);await s.put(e,t)}async function networkFirst({request:e}){try{const t=await fetch(e);return t&&t.ok&&putInCache(e,t.clone()),t}catch(t){notifyServiceUnavailable();const s=await caches.open(CACHE_NAME),a=await s.match(e);return a||new Response("Ressource non disponible.",{status:408,headers:{"Content-Type":"text/plain; charset=utf-8"}})}}function notifyServiceUnavailable(){self.clients.matchAll().then((e=>{e&&e.length&&e.forEach((e=>{e.postMessage({action:"service-unavailable"})}))}))}self.addEventListener("install",(e=>{self.skipWaiting(),e.waitUntil(addResourcesToCache(resourcesToCache))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.filter((e=>e!==CACHE_NAME)).map((e=>caches.delete(e)))))).then((()=>self.clients.claim())))})),self.addEventListener("fetch",(e=>{"GET"===e.request.method&&e.respondWith(networkFirst({request:e.request}))}));